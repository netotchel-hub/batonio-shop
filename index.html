<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BATONIO - –ú–∞–≥–∞–∑–∏–Ω –≤—ã–ø–µ—á–∫–∏ –∏ –∑–∞–º–æ—Ä–æ–∑–∫–∏</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div id="app">
        <!-- –®–∞–ø–∫–∞ -->
        <header class="header">
            <div class="shop-name" id="shopName">BATONIO</div>
            <div class="delivery-info" id="deliveryInfo">–î–æ—Å—Ç–∞–≤–∫–∞ –∑–∞–≤—Ç—Ä–∞ —Å 17:00</div>
        </header>

        <!-- –ö–ê–¢–ï–ì–û–†–ò–ò –¢–û–í–ê–†–û–í -->
        <div class="categories" id="categoriesContainer">
            <button class="category-btn active" onclick="filterProducts('–≤—Å–µ')">–í—Å–µ</button>
            <button class="category-btn" onclick="filterProducts('–≤—ã–ø–µ—á–∫–∞')">–í—ã–ø–µ—á–∫–∞</button>
            <button class="category-btn" onclick="filterProducts('–∑–∞–º–æ—Ä–æ–∑–∫–∞')">–ó–∞–º–æ—Ä–æ–∑–∫–∞</button>
        </div>

        <!-- –¢–û–í–ê–†–´ -->
        <main class="products-grid" id="productsContainer">
            <!-- –¢–æ–≤–∞—Ä—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Å—é–¥–∞ -->
        </main>

        <!-- –ö–ù–û–ü–ö–ê –ö–û–†–ó–ò–ù–´ -->
        <div class="cart-fab" id="cartFab">
            üõí <span id="cartCount">0</span>
        </div>

        <!-- –û–ö–ù–û –¢–û–í–ê–†–ê -->
        <div class="modal" id="productModal">
            <div class="modal-content">
                <button class="close-modal" onclick="closeModal('productModal')">√ó</button>
                <img id="modalImage" src="" alt="" class="modal-image">
                <h2 id="modalName"></h2>
                <p class="modal-weight" id="modalWeight"></p>
                <p class="modal-composition" id="modalComposition"></p>
                <p class="modal-price" id="modalPrice"></p>
                
                <div class="quantity-selector">
                    <button class="qty-btn" onclick="changeQuantity(-1)">-</button>
                    <span id="currentQty">1</span>
                    <button class="qty-btn" onclick="changeQuantity(1)">+</button>
                </div>
                <button class="add-to-cart-btn" onclick="addToCart()">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
            </div>
        </div>

        <!-- –ö–û–†–ó–ò–ù–ê -->
        <div class="modal" id="cartModal">
            <div class="modal-content cart-modal">
                <button class="close-modal" onclick="closeModal('cartModal')">√ó</button>
                <h2>–í–∞—à –∑–∞–∫–∞–∑</h2>
                <div id="cartItems">
                    <!-- –¢–æ–≤–∞—Ä—ã –≤ –∫–æ—Ä–∑–∏–Ω–µ -->
                </div>
                <div class="cart-total">
                    –ò—Ç–æ–≥–æ: <span id="cartTotal">0</span> —Ä—É–±
                </div>
                <button class="checkout-btn" onclick="openOrderForm()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
            </div>
        </div>

        <!-- –§–û–†–ú–ê –ó–ê–ö–ê–ó–ê -->
        <div class="modal" id="orderFormModal">
            <div class="modal-content order-form">
                <button class="close-modal" onclick="closeModal('orderFormModal')">√ó</button>
                <h2>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>
                
                <div class="form-group">
                    <label>–ì–æ—Ä–æ–¥</label>
                    <input type="text" id="city" value="–ú–µ–¥–≤–µ–∂—å–µ–≥–æ—Ä—Å–∫" readonly>
                </div>
                
                <div class="form-group">
                    <label>–£–ª–∏—Ü–∞ *</label>
                    <input type="text" id="street" required placeholder="–í–≤–µ–¥–∏—Ç–µ —É–ª–∏—Ü—É">
                </div>
                
                <div class="form-group">
                    <label>–î–æ–º *</label>
                    <input type="text" id="house" required placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –¥–æ–º–∞">
                </div>
                
                <div class="form-group">
                    <label>–ö–≤–∞—Ä—Ç–∏—Ä–∞ *</label>
                    <input type="text" id="apartment" required placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∫–≤–∞—Ä—Ç–∏—Ä—ã">
                </div>
                
                <div class="form-group">
                    <label>–ò–º—è *</label>
                    <input type="text" id="customerName" required placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è">
                </div>
                
                <div class="form-group">
                    <label>–¢–µ–ª–µ—Ñ–æ–Ω *</label>
                    <input type="tel" id="phone" required placeholder="+7 (999) 123-45-67">
                </div>
                
                <div class="form-group">
                    <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É</label>
                    <textarea id="comment" rows="3" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è –∫ –∑–∞–∫–∞–∑—É..."></textarea>
                </div>
                
                <div class="form-group checkbox-group">
                    <input type="checkbox" id="rememberMe">
                    <label for="rememberMe">–ó–∞–ø–æ–º–Ω–∏—Ç—å –º–æ–∏ –¥–∞–Ω–Ω—ã–µ</label>
                </div>
                
                <div class="form-group checkbox-group">
                    <input type="checkbox" id="agreement" required>
                    <label for="agreement" id="agreementText">
                        –Ø –ø–æ–Ω–∏–º–∞—é, —á—Ç–æ –∑–∞–∫–∞–∑—ã–≤–∞—è —Å–µ–π—á–∞—Å, –∑–∞–∫–∞–∑ –±—É–¥–µ—Ç –¥–æ—Å—Ç–∞–≤–ª–µ–Ω –∑–∞–≤—Ç—Ä–∞ —Å 17:00
                    </label>
                </div>
                
                <button class="submit-order-btn" onclick="submitOrder()">–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ</button>
            </div>
        </div>

        <!-- –û–ü–õ–ê–¢–ê -->
        <div class="modal" id="paymentModal">
            <div class="modal-content payment-modal">
                <button class="close-modal" onclick="closeModal('paymentModal')">√ó</button>
                <h2>–û–ø–ª–∞—Ç–∞ –∑–∞–∫–∞–∑–∞</h2>
                <p>–°—É–º–º–∞ –∫ –æ–ø–ª–∞—Ç–µ: <strong id="paymentAmount">0</strong> —Ä—É–±</p>
                
                <div class="payment-mock">
                    <div class="card-input">
                        <input type="text" placeholder="–ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã" value="4242 4242 4242 4242" readonly>
                    </div>
                    <div class="card-input">
                        <input type="text" placeholder="–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è" value="12/25" readonly>
                    </div>
                    <div class="card-input">
                        <input type="text" placeholder="CVV" value="123" readonly>
                    </div>
                </div>
                
                <button class="pay-btn" onclick="processPayment()">–û–ø–ª–∞—Ç–∏—Ç—å</button>
                <button class="back-btn" onclick="goBackToForm()">–ù–∞–∑–∞–¥</button>
            </div>
        </div>

        <!-- –£–°–ü–ï–®–ù–´–ô –ó–ê–ö–ê–ó -->
        <div class="modal" id="successModal">
            <div class="modal-content success-modal">
                <div class="success-icon">‚úì</div>
                <h2>–ë–ª–∞–≥–æ–¥–∞—Ä—é –∑–∞ –∑–∞–∫–∞–∑!</h2>
                <p>–£–≤–∏–¥–∏–º—Å—è –∑–∞–≤—Ç—Ä–∞ —Å 17:00</p>
                <button class="close-success-btn" onclick="closeModal('successModal')">–ó–∞–∫—Ä—ã—Ç—å</button>
            </div>
        </div>

        <!-- –ù–ï–†–ê–ë–û–ß–ï–ï –í–†–ï–ú–Ø -->
        <div class="non-working-overlay" id="nonWorkingOverlay">
            <div class="non-working-message">
                <h3>‚è∞ –ú–∞–≥–∞–∑–∏–Ω –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç</h3>
                <p>–ü—Ä–∏–µ–º –∑–∞–∫–∞–∑–æ–≤ —Å 00:30 –¥–æ 04:30</p>
                <p>–í–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ—Å—å –ø–æ—Å–ª–µ 4:30</p>
            </div>
        </div>

        <!-- –ê–î–ú–ò–ù-–ü–ê–ù–ï–õ–¨ (–°–ö–†–´–¢–ê –î–õ–Ø –û–ë–´–ß–ù–´–• –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–ï–ô) -->
        <div id="adminPanel" style="display: none; position: fixed; top: 20px; right: 20px; z-index: 9999; background: white; padding: 15px; border-radius: 10px; box-shadow: 0 4px 20px rgba(0,0,0,0.15); border: 2px solid #E27D60;">
            <h3 style="margin-bottom: 10px; color: #E27D60;">–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h3>
            
            <div style="margin-bottom: 10px;">
                <label style="display: block; margin-bottom: 5px; font-size: 12px;">–°—Ç–∞—Ç—É—Å –º–∞–≥–∞–∑–∏–Ω–∞:</label>
                <div id="shopStatus" style="padding: 5px 10px; background: #ff4757; color: white; border-radius: 4px; font-weight: bold;">
                    –ó–ê–ö–†–´–¢
                </div>
            </div>
            
            <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                <button onclick="adminForceOpenShop()" style="flex: 1; background: #4CAF50; color: white; border: none; padding: 8px; border-radius: 4px; font-size: 12px; cursor: pointer;">
                    üîì –û—Ç–∫—Ä—ã—Ç—å
                </button>
                <button onclick="adminForceCloseShop()" style="flex: 1; background: #ff4757; color: white; border: none; padding: 8px; border-radius: 4px; font-size: 12px; cursor: pointer;">
                    üîí –ó–∞–∫—Ä—ã—Ç—å
                </button>
            </div>
            
            <div>
                <button onclick="hideAdminPanel()" style="width: 100%; background: #666; color: white; border: none; padding: 6px; border-radius: 4px; font-size: 11px; cursor: pointer;">
                    –°–∫—Ä—ã—Ç—å –ø–∞–Ω–µ–ª—å
                </button>
            </div>
        </div>

        <!-- –ê–î–ú–ò–ù-–¢–†–ò–ì–ì–ï–† (–°–ï–ö–†–ï–¢–ù–ê–Ø –ö–ù–û–ü–ö–ê –î–õ–Ø –í–•–û–î–ê) -->
        <div id="adminTrigger" style="position: fixed; top: 10px; right: 10px; z-index: 9998; opacity: 0.1; transition: opacity 0.3s;">
            <div style="display: flex; align-items: center; justify-content: center; width: 40px; height: 40px; background: #E27D60; color: white; border-radius: 50%; font-size: 20px; cursor: pointer;">
                ‚öôÔ∏è
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    
    <script>
    // –ê–î–ú–ò–ù-–§–£–ù–ö–¶–ò–ò (–¢–û–õ–¨–ö–û –í –≠–¢–û–ú –§–ê–ô–õ–ï)
    let adminAccess = false;
    const ADMIN_PASSWORD = 'batonio2024'; // –í–∞—à –ø–∞—Ä–æ–ª—å
    
    // –ü–æ–∫–∞–∑–∞—Ç—å –∞–¥–º–∏–Ω-—Ç—Ä–∏–≥–≥–µ—Ä –ø—Ä–∏ –¥–≤–æ–π–Ω–æ–º –∫–ª–∏–∫–µ
    document.addEventListener('dblclick', function(e) {
        if (e.clientX > window.innerWidth - 100 && e.clientY < 100) {
            const trigger = document.getElementById('adminTrigger');
            trigger.style.opacity = '1';
            setTimeout(() => {
                trigger.style.opacity = '0.1';
            }, 3000);
        }
    });
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –Ω–∞ –∞–¥–º–∏–Ω-—Ç—Ä–∏–≥–≥–µ—Ä
    document.getElementById('adminTrigger').onclick = function() {
        if (!adminAccess) {
            const password = prompt('–í–≤–µ–¥–∏—Ç–µ –∞–¥–º–∏–Ω-–ø–∞—Ä–æ–ª—å:');
            if (password === ADMIN_PASSWORD) {
                adminAccess = true;
                showAdminPanel();
            } else {
                alert('–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å');
            }
        } else {
            showAdminPanel();
        }
    };
    
    function showAdminPanel() {
        document.getElementById('adminPanel').style.display = 'block';
        updateAdminStatus();
    }
    
    function hideAdminPanel() {
        document.getElementById('adminPanel').style.display = 'none';
    }
    
    function updateAdminStatus() {
        const statusElement = document.getElementById('shopStatus');
        if (window.state && window.state.isWorkingTime) {
            statusElement.textContent = '–û–¢–ö–†–´–¢';
            statusElement.style.background = '#4CAF50';
        } else {
            statusElement.textContent = '–ó–ê–ö–†–´–¢';
            statusElement.style.background = '#ff4757';
        }
    }
    
    function adminForceOpenShop() {
        if (!adminAccess) {
            alert('–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è');
            return;
        }
        if (typeof forceOpenShop === 'function') {
            forceOpenShop();
            updateAdminStatus();
            alert('–ú–∞–≥–∞–∑–∏–Ω –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ—Ç–∫—Ä—ã—Ç');
        }
    }
    
    function adminForceCloseShop() {
        if (!adminAccess) {
            alert('–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è');
            return;
        }
        if (typeof forceCloseShop === 'function') {
            forceCloseShop();
            updateAdminStatus();
            alert('–ú–∞–≥–∞–∑–∏–Ω –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∑–∞–∫—Ä—ã—Ç');
        }
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
    setInterval(updateAdminStatus, 5000);
    </script>
</body>
</html>